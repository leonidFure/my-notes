# Области памяти в JVM
1. Heap (Куча) - область памяти, где размещаются объекты и связанные с ними данные. Они управляются сборщиком мусора (GC).
	- Молодое поколение
		- Здесь создаются новые объекты.
		- Делится на области:
			- Eden - основная область для новых объектов
			- Survivor Space (S0, S1) - области, куда переносятся объекты, пережившие сборки мусора в Eden.
	- Старшее поколение:
		- Здесь хранятся долгоживущие объекты, которые пережили несколько сборок мусора в молодом поколении.
	- Metaspace:
		- Содержит метаинформацию классов, описания методов, структуры классов и т.д.
		- Заменила Permanent Generation, начиная с Java 8l.
2. Stack (Стек) - содержит данные, относящиеся к вызовам методов.
	- Локальные переменные.
	- Указатели на текущие инструкции.
	- Данные для вызова и возврата функции.
	Каждый поток имеет свой локальный стек.
3. Program Counter - небольшая область памяти, которая хранит адрес текущей инструкции, выполняемой потоком.
4. Native Method Stack (Стек нативных методов) - используется для вызова методов написанных на других языках.
# Управление памятью
Garbage Collector - Java автоматизирует управление памятью с помощью сборщика мусора, который:
- Удаляет объекты, на которые больше нет ссылок. 
- Освобождает память, предотвращая утечки.
Типы GC:
1. **Serial GC** — подходит для небольших приложений с одним потоком.
2. **Parallel GC** — оптимизирован для многопоточных приложений.
3. **G1 GC** — современный сборщик, ориентированный на минимизацию пауз.
4. **ZGC и Shenandoah GC** — экспериментальные низкозадержные сборщики.
# Типы ссылок на объекты
1. Strong Reference - обычная ссылка, удерживающая объект в памяти.
2. Week Reference - объект может быть удален сборщиком мусора.
3. Soft Reference - используется для кэширования, объект удаляется только при нехватке памяти.
4. Phantom Reference - используется для отслеживания финализации объекта.
# Проблемы с памятью
1. Утечка памяти. Происходит если ссылки на объекты остаются в памяти, даже если больше не нужны.
2. OutOfMemoryError. Возникает, если JVM не может выделить память.
# Оптимизация использования памяти
- Использовать профайлеры
- Очищать ненужные ссылки
- Использовать пул объектов для часто создаваемых структур.
- Настраивать параметры JVM (-Xms, -Xmx)
# Примитивы и объекты
Объекты всегда создаются в куче, вне зависимости от их контекста. Это относится как к экземплярам классов, так и к массивам.
Ссылки на объекты размещаются в стеке, если это локальная переменная, в куче, если это поле другого объекта.
# Взаимодействие стека и кучи
Когда метод вызывается:
- Локальные переменные (включая ссылки на объекты) размещаются в стеке.
- Если переменная указывает на объект, сам объект создается в куче.